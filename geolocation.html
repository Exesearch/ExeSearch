<script>

var distance;
var userLat;
var userLatRadians;
var userLong;
var userLongRadians;
var targetLatRadians;
var targetLongRadians;
var longDifference;

function checkPermission() {
	if (Navigator.geolocation) {
		//Ask the user for permission to use location.
		window.location.href = 'PROFILE PAGE';
	} else {
		//If refused, take to another page.
		window.location.href = 'GPS REFUSAL PAGE';
	}
}

function checkPosition(double targetLat, double targetLong, int radius) {
	userLat = position.coords.latitude;
	userLong = position.coords.longitude;

	//Find the distance between target and current position
	//Use spherical law of cosines - should be accurate to a few metres

	userLatRadians = userLat.toRadians();
	targetLatRadians = targetLat.toRadians();
	longDifference = (targetLong - userLong).toRadians();
	earthRadius = 6371000;

	distance = Math.acos( Math.sin(userLatRadians)*Math.sin(targetLatRadians)
			+ Math.cos(userLatRadians)*Math.cos(targetLatRadians)
			*Math.cos(longDifference)) * earthRadius;

	//Check that it is within range
	if (distance <= radius) {
		alert("Success!");
	} else {
		alert("Failure!");
	}
}

function watchPosition() {

}

</script>
